var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.useDimensions=exports.DimensionsProvider=exports.useDevice=exports.DimensionsContext=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactHooks=require("@apollo/react-hooks");var _queries=require("../queries");var _reactNative=require("react-native");var _theme=require("../theme");var _this=this,_jsxFileName="/Users/kane/Lab/Eros/src/state/useDimensions.web.tsx";var DimensionsContext=(0,_react.createContext)(null);exports.DimensionsContext=DimensionsContext;var useDevice=function useDevice(){var _useQuery=(0,_reactHooks.useQuery)(_queries.DEVICE),data=_useQuery.data;return data&&data.Device||{type:'desktop'};};exports.useDevice=useDevice;var DimensionsProvider=function DimensionsProvider(_ref){var children=_ref.children;var _useDevice=useDevice(),type=_useDevice.type;var initialMobile=type==='mobile';var initialDesktop=type==='desktop';var initalState={height:null,width:null,mobile:initialMobile,desktop:initialDesktop};var _useState=(0,_react.useState)(initalState),_useState2=(0,_slicedToArray2.default)(_useState,2),dimensions=_useState2[0],setDimensions=_useState2[1];(0,_react.useEffect)(function(){var initialDimensions=_reactNative.Dimensions.get('window');var isMobile=initialDimensions.width<_theme.DESKTOP_BREAKPOINT;var isDesktop=initialDimensions.width>=_theme.DESKTOP_BREAKPOINT;setDimensions((0,_extends2.default)({},initialDimensions,{mobile:isMobile,desktop:isDesktop}));_reactNative.Dimensions.addEventListener('change',function(_ref2){var windowDimensions=_ref2.window;var nextIsMobile=windowDimensions.width<_theme.DESKTOP_BREAKPOINT;var nextIsDesktop=windowDimensions.width>=_theme.DESKTOP_BREAKPOINT;setDimensions((0,_extends2.default)({},windowDimensions,{mobile:nextIsMobile,desktop:nextIsDesktop}));});return function(){return _reactNative.Dimensions.removeEventListener('change');};},[setDimensions]);return _react.default.createElement(DimensionsContext.Provider,{value:(0,_extends2.default)({},dimensions),__self:_this,__source:{fileName:_jsxFileName,lineNumber:41,columnNumber:5}},children);};exports.DimensionsProvider=DimensionsProvider;var useDimensions=function useDimensions(){var dimensions=(0,_react.useContext)(DimensionsContext);return dimensions;};exports.useDimensions=useDimensions;var _default=useDimensions;exports.default=_default;