var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.useCompose=exports.ComposeActions=exports.RESET=exports.SET_TYPE=exports.SET_INDEX=exports.SET_CONTENT=exports.SET_FRIENDLY_URL=exports.SET_TITLE=exports.SET_RAW=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _extends3=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _react=require("react");var _fns=require("../fns");var SET_RAW='SET_RAW';exports.SET_RAW=SET_RAW;var SET_TITLE='SET_TITLE';exports.SET_TITLE=SET_TITLE;var SET_FRIENDLY_URL='SET_FRIENDLY_URL';exports.SET_FRIENDLY_URL=SET_FRIENDLY_URL;var SET_CONTENT='SET_CONTENT';exports.SET_CONTENT=SET_CONTENT;var SET_INDEX='SET_INDEX';exports.SET_INDEX=SET_INDEX;var SET_TYPE='SET_TYPE';exports.SET_TYPE=SET_TYPE;var RESET='RESET';exports.RESET=RESET;var ComposeActions={SET_RAW:SET_RAW,SET_TITLE:SET_TITLE,SET_FRIENDLY_URL:SET_FRIENDLY_URL,SET_CONTENT:SET_CONTENT,SET_INDEX:SET_INDEX,SET_TYPE:SET_TYPE,RESET:RESET};exports.ComposeActions=ComposeActions;var INITIAL_STATE={_raw:'',title:'',friendlyUrl:'',content:{0:{type:'Text',text:''}},activeIndex:0,activeType:'Text'};var reducer=function reducer(state,action){switch(action.type){case SET_RAW:return(0,_extends3.default)({},state,{_raw:action.payload});case SET_CONTENT:return(0,_extends3.default)({},state,{content:(0,_extends3.default)({},state.content,(0,_defineProperty2.default)({},action.payload.index,action.payload.data))});case SET_INDEX:return(0,_extends3.default)({},state,{activeIndex:action.payload});case SET_TYPE:return(0,_extends3.default)({},state,{activeType:action.payload});case SET_TITLE:return(0,_extends3.default)({},state,{title:action.payload});case SET_FRIENDLY_URL:return(0,_extends3.default)({},state,{friendlyUrl:action.payload});case RESET:return INITIAL_STATE;default:return state;}};var useCompose=function useCompose(){var _useReducer=(0,_react.useReducer)(reducer,INITIAL_STATE),_useReducer2=(0,_slicedToArray2.default)(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];(0,_react.useEffect)(function(){var friendlyUrl=(0,_fns.makeFriendlyUrl)(state.title);dispatch({type:SET_FRIENDLY_URL,payload:friendlyUrl});},[state.title]);return[state,dispatch];};exports.useCompose=useCompose;var _default=useCompose;exports.default=_default;