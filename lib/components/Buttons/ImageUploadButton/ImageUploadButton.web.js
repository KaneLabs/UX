var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _react=_interopRequireWildcard(require("react"));var _fns=require("../../../fns");var _IconButton=_interopRequireDefault(require("../../IconButton"));var _this=this,_jsxFileName="/Users/kane/Lab/Eros/src/components/Buttons/ImageUploadButton/ImageUploadButton.web.js";var ImageUploadButton=function ImageUploadButton(_ref){var onFiles=_ref.onFiles,renderPreviews=_ref.renderPreviews,_ref$iconName=_ref.iconName,iconName=_ref$iconName===void 0?null:_ref$iconName,rest=(0,_objectWithoutProperties2.default)(_ref,["onFiles","renderPreviews","iconName"]);var fileSelectorRef=(0,_react.useRef)(null);var onFilesDetected=(0,_react.useCallback)(function(e){e.preventDefault();var filesArray=Array.from(e.target.files);return onFiles(filesArray);},[onFiles]);(0,_react.useEffect)(function(){fileSelectorRef.current=(0,_fns.buildFileSelector)();fileSelectorRef.current.addEventListener('change',onFilesDetected);return function(){if(fileSelectorRef.current){fileSelectorRef.current.removeEventListener('change',onFilesDetected);fileSelectorRef.current.remove();}};},[onFilesDetected]);var onPress=function onPress(e){e.preventDefault();fileSelectorRef.current.click();};var getPresignedUrl=function getPresignedUrl(file){return _regenerator.default.async(function getPresignedUrl$(_context){while(1){switch(_context.prev=_context.next){case 0:case"end":return _context.stop();}}},null,null,null,Promise);};return _react.default.createElement(_IconButton.default,(0,_extends2.default)({name:iconName||'ios-image',onPress:onPress},rest,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:68,columnNumber:10}}));};var _default=ImageUploadButton;exports.default=_default;