var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _components=require("../../components");var _link=_interopRequireDefault(require("next/link"));var _state=require("../../state");var _reactHooks=require("@apollo/react-hooks");var _queries=require("../../queries");var _this=this,_jsxFileName="/Users/kane/Lab/Eros/src/containers/AccountMenuButton/AccountMenuButton.web.js";var AccountLinkMenuItem=function AccountLinkMenuItem(props){var onPress=props.onPress,handle=props.handle;return _react.default.createElement(_link.default,{passHref:true,href:"/[creator]",as:"/@"+handle,__self:_this,__source:{fileName:_jsxFileName,lineNumber:12,columnNumber:5}},_react.default.createElement("a",{__self:_this,__source:{fileName:_jsxFileName,lineNumber:13,columnNumber:7}},_react.default.createElement(_components.MenuItem,{onPress:onPress,text:"Profile",__self:_this,__source:{fileName:_jsxFileName,lineNumber:14,columnNumber:9}})));};var AccountMenuButton=function AccountMenuButton(props){var account=(0,_state.useAccount)();var _useState=(0,_react.useState)(false),_useState2=(0,_slicedToArray2.default)(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useMutation=(0,_reactHooks.useMutation)(_queries.LOGOUT),_useMutation2=(0,_slicedToArray2.default)(_useMutation,1),logout=_useMutation2[0];var onLogout=function onLogout(){return _regenerator.default.async(function onLogout$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regenerator.default.awrap(logout());case 2:case"end":return _context.stop();}}},null,null,null,Promise);};return _react.default.createElement(_components.Menu,{visible:open,onBackdropPress:function onBackdropPress(){return setOpen(false);},button:_react.default.createElement(_components.AccountButton,{onPress:function onPress(){return setOpen(function(last){return!last;});},size:32,__self:_this,__source:{fileName:_jsxFileName,lineNumber:33,columnNumber:15}}),__self:_this,__source:{fileName:_jsxFileName,lineNumber:30,columnNumber:5}},_react.default.createElement(AccountLinkMenuItem,{handle:account==null?void 0:account.handle,onPress:function onPress(){return setOpen(false);},__self:_this,__source:{fileName:_jsxFileName,lineNumber:35,columnNumber:7}}),_react.default.createElement(_components.MenuItem,{text:"Logout",onPress:onLogout,__self:_this,__source:{fileName:_jsxFileName,lineNumber:36,columnNumber:7}}));};var _default=AccountMenuButton;exports.default=_default;