var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.ToolsDrawer=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _react=_interopRequireDefault(require("react"));var _components=require("../../components");var _queries=require("../../queries");var _reactHooks=require("@apollo/react-hooks");var _theme=require("../../theme");var _state=require("../../state");var _DrawerToggleButton=_interopRequireDefault(require("../DrawerToggleButton"));var _ThemeToggleButton=_interopRequireDefault(require("../ThemeToggleButton"));var _this=this,_jsxFileName="/Users/kane/Lab/Eros/src/containers/ToolsDrawer/index.js";var useStyles=(0,_theme.makeStyles)(function(theme){return{toolbarVertical:{position:'fixed',left:0,top:0,bottom:0,zIndex:10,paddingHorizontal:theme.unit,overflowX:'hidden'},open:(0,_extends2.default)({backgroundColor:theme.canvas2Opaque,backdropFilter:'blur(12px)'},theme.shadow(8),{height:'100%',width:theme.TOOLBAR_WIDTH_OPEN,borderRightWidth:theme.borderWidth,borderColor:theme.borderColor}),closed:(0,_extends2.default)({backgroundColor:'rgba(0,0,0,0)'},theme.shadow(0),{height:'100%',width:theme.TOOLBAR_WIDTH_CLOSED,alignItems:'center'}),main:{paddingVertical:theme.unit,flex:1},bottom:{paddingVertical:theme.unit*2},drawerLogo:{},composeButton:{}};});var ToolsDrawer=function ToolsDrawer(){var account=(0,_state.useAccount)();var styles=useStyles();var _useQuery=(0,_reactHooks.useQuery)(_queries.DRAWER),_useQuery$data$Drawer=_useQuery.data.Drawer,open=_useQuery$data$Drawer.open,lock=_useQuery$data$Drawer.lock,client=_useQuery.client;console.log({open:open,lock:lock});var setDrawerOpen=function setDrawerOpen(open){if(lock)return null;client.writeQuery({query:_queries.DRAWER,data:{Drawer:{open:open,lock:lock,__typename:'Drawer'}}});};var openDrawer=function openDrawer(){return setDrawerOpen(true);};var closeDrawer=function closeDrawer(){return setDrawerOpen(false);};var toggleLock=function toggleLock(){client.writeQuery({query:_queries.DRAWER,data:{Drawer:{open:open,lock:!lock,__typename:'Drawer'}}});};var _useMutation=(0,_reactHooks.useMutation)(_queries.TOGGLE_COMPOSE_MODAL),_useMutation2=(0,_slicedToArray2.default)(_useMutation,1),toggleCompose=_useMutation2[0];var hasAccount=account&&account.handle;return _react.default.createElement(_components.View,{testID:"ToolsDrawer",onMouseEnter:openDrawer,onMouseLeave:closeDrawer,style:[styles.toolbarVertical,open?styles.open:styles.closed],__self:_this,__source:{fileName:_jsxFileName,lineNumber:95,columnNumber:5}},_react.default.createElement(_components.View,{style:styles.drawerLogo,__self:_this,__source:{fileName:_jsxFileName,lineNumber:100,columnNumber:7}},_react.default.createElement(_components.NavLogo,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:101,columnNumber:9}})),_react.default.createElement(_components.View,{style:styles.main,__self:_this,__source:{fileName:_jsxFileName,lineNumber:104,columnNumber:7}},_react.default.createElement(_components.IconButton,{style:styles.composeButton,fab:true,testID:"DrawerCreateButton",name:"ios-create-outline",onPress:toggleCompose,__self:_this,__source:{fileName:_jsxFileName,lineNumber:105,columnNumber:9}})),_react.default.createElement(_components.View,{style:styles.bottom,__self:_this,__source:{fileName:_jsxFileName,lineNumber:114,columnNumber:7}},_react.default.createElement(_ThemeToggleButton.default,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:115,columnNumber:9}}),_react.default.createElement(_components.DrawerLockButton,{lock:lock,onPress:toggleLock,__self:_this,__source:{fileName:_jsxFileName,lineNumber:116,columnNumber:9}})));};exports.ToolsDrawer=ToolsDrawer;var _default=ToolsDrawer;exports.default=_default;