var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _components=require("../../components");var _theme=require("../../theme");var _state=require("../../state");var _ImagePreview=_interopRequireDefault(require("./ImagePreview"));var _this=this,_jsxFileName="/Users/kane/Lab/Eros/src/containers/Compose/ComposeBody.js";var VideoPreview=function VideoPreview(_ref){var files=_ref.files;return files.map(function(fileBlob){var url=URL.createObjectURL(fileBlob);return _react.default.createElement(_components.Video,{controls:true,src:url,style:{height:'auto',width:'100%'},__self:_this,__source:{fileName:_jsxFileName,lineNumber:17,columnNumber:7}});});};var ContentPreview=(0,_react.memo)(function(_ref2){var _ref2$contentArray=_ref2.contentArray,contentArray=_ref2$contentArray===void 0?[]:_ref2$contentArray;return Array.from(contentArray).map(function(_ref3){var _ref4=(0,_slicedToArray2.default)(_ref3,2),index=_ref4[0],contentBlock=_ref4[1];if(contentBlock.type==='Text'){return _react.default.createElement(_components.ContentBlockText,(0,_extends2.default)({},contentBlock,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:24,columnNumber:14}}));}if(contentBlock.type==='Image'){return _react.default.createElement(_ImagePreview.default,(0,_extends2.default)({},contentBlock.files[0],{__self:_this,__source:{fileName:_jsxFileName,lineNumber:27,columnNumber:14}}));}if(contentBlock.type==='Video'){console.log({videoContentBlock:contentBlock});return _react.default.createElement(VideoPreview,(0,_extends2.default)({},contentBlock,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:31,columnNumber:14}}));}return null;});});var ComposeBody=(0,_react.memo)(function(_ref5){var state=_ref5.state,dispatch=_ref5.dispatch,loadingPercent=_ref5.loadingPercent;var styles=useStyles();var setContent=function setContent(text){dispatch({type:_state.ComposeActions.SET_CONTENT,payload:{index:state.activeIndex,data:{index:state.activeIndex,type:'Text',text:text}}});};console.log('content',state.content);console.log('activeIndex',state.activeIndex);var contentArray=Object.entries(state.content).filter(function(_ref6){var _ref7=(0,_slicedToArray2.default)(_ref6,1),index=_ref7[0];return state.activeType!=='Text'||parseInt(index,10)!==state.activeIndex;});var showLoadingBar=loadingPercent!==null;return _react.default.createElement(_reactNative.View,{style:styles.container,__self:_this,__source:{fileName:_jsxFileName,lineNumber:62,columnNumber:5}},showLoadingBar&&_react.default.createElement(_components.Subtitle,{text:loadingPercent*100+"%",__self:_this,__source:{fileName:_jsxFileName,lineNumber:63,columnNumber:26}}),_react.default.createElement(ContentPreview,{contentArray:contentArray,content:state.content,loadingPercent:loadingPercent,__self:_this,__source:{fileName:_jsxFileName,lineNumber:64,columnNumber:7}}),state.activeType==='Text'&&_react.default.createElement(_components.Multiline,{flat:true,value:state.content[state.activeIndex].text,onChangeText:setContent,style:styles.multiline,__self:_this,__source:{fileName:_jsxFileName,lineNumber:71,columnNumber:9}}));});var useStyles=(0,_theme.makeStyles)(function(theme){return{container:{},multiline:{paddingHorizontal:utheme.unit*2}};});var _default=ComposeBody;exports.default=_default;