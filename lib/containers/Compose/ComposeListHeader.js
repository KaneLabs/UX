var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _components=require("../../components");var _reactHooks=require("@apollo/react-hooks");var _queries=require("../../queries");var _theme=require("../../theme");var _FilePreviews=_interopRequireDefault(require("./FilePreviews"));var _this=this,_jsxFileName="/Users/kane/Lab/Eros/src/containers/Compose/ComposeListHeader.js";var ComposeListHeader=function ComposeListHeader(props){var styles=useStyles();var _useTheme=(0,_theme.useTheme)(),_useTheme2=(0,_slicedToArray2.default)(_useTheme,1),NAV_HEIGHT=_useTheme2[0].NAV_HEIGHT;var _useQuery=(0,_reactHooks.useQuery)(_queries.ACCOUNT),accountData=_useQuery.data;var account=accountData&&accountData.account;var _useState=(0,_react.useState)([]),_useState2=(0,_slicedToArray2.default)(_useState,2),files=_useState2[0],setFiles=_useState2[1];var removeFile=function removeFile(i){return setFiles(function(prevFiles){return prevFiles.filter(function(_,index){return i!==index;});});};var onFiles=function onFiles(nextFiles){return setFiles(function(prevFiles){return[].concat((0,_toConsumableArray2.default)(prevFiles),(0,_toConsumableArray2.default)(nextFiles));});};return _react.default.createElement(_components.View,{style:styles.container,__self:_this,__source:{fileName:_jsxFileName,lineNumber:28,columnNumber:5}},_react.default.createElement(_components.View,{style:styles.header,__self:_this,__source:{fileName:_jsxFileName,lineNumber:29,columnNumber:7}},_react.default.createElement(_components.View,{style:styles.avatarContainer,__self:_this,__source:{fileName:_jsxFileName,lineNumber:30,columnNumber:9}},_react.default.createElement(_components.Avatar,{size:NAV_HEIGHT,avatarUrl:account.avatarUrl,__self:_this,__source:{fileName:_jsxFileName,lineNumber:31,columnNumber:11}})),_react.default.createElement(_components.Multiline,{flat:true,style:styles.multiline,__self:_this,__source:{fileName:_jsxFileName,lineNumber:33,columnNumber:9}})),_react.default.createElement(_FilePreviews.default,{files:files,onRemove:removeFile,__self:_this,__source:{fileName:_jsxFileName,lineNumber:35,columnNumber:7}}),_react.default.createElement(_components.View,{style:styles.buttonRow,__self:_this,__source:{fileName:_jsxFileName,lineNumber:36,columnNumber:7}},_react.default.createElement(_components.View,{style:styles.buttonRowLeft,__self:_this,__source:{fileName:_jsxFileName,lineNumber:37,columnNumber:9}},_react.default.createElement(_components.ImageUploadButton,{onFiles:onFiles,__self:_this,__source:{fileName:_jsxFileName,lineNumber:38,columnNumber:11}})),_react.default.createElement(_components.OutlinedButton,{text:"Submit",__self:_this,__source:{fileName:_jsxFileName,lineNumber:40,columnNumber:9}})));};var useStyles=(0,_theme.makeStyles)(function(theme){var innerWidth=theme.FEED_WIDTH-theme.gutterSize*3-theme.NAV_HEIGHT;var imageHeight=innerWidth*9/16;return{container:{width:'100%',maxWidth:theme.FEED_WIDTH,borderColor:theme.borderColor,borderBottomWidth:theme.borderWidth},avatarContainer:{paddingHorizontal:theme.unit*2},buttonRow:{alignItems:'center',flexDirection:'row',justifyContent:'flex-end',paddingVertical:theme.unit*2,paddingHorizontal:theme.unit*2},buttonRowLeft:{flex:1,alignItems:'center',flexDirection:'row'},multiline:{width:innerWidth,paddingVertical:theme.unit,paddingLeft:0,paddingRight:0},imagePreviewContainer:{alignItems:'flex-end',paddingRight:theme.unit*2},imagePreview:{height:imageHeight,width:innerWidth,borderRadius:theme.unit,overflow:'hidden',alignItems:'flex-end'},closeButton:{backgroundColor:'rgba(0,0,0,0.85)',margin:theme.unit},closeButtonHover:{backgroundColor:'rgba(0,0,0,0.75)',margin:theme.unit},header:{flexDirection:'row',marginBottom:theme.unit*2}};});var _default=ComposeListHeader;exports.default=_default;