var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _react=_interopRequireDefault(require("react"));var _reactNative=require("react-native");var _reactNativeStreamClient=require("@fora/react-native-stream-client");var _jsxFileName="/Users/kane/Lab/Eros/src/containers/Stream/index.js";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}var LOCALHOST_RTMP='rtmp://192.168.1.13:1935/live/stream';var mapBitrate=function mapBitrate(){var resolution=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'1080p';var fps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:60;if(resolution==='1080p'&&fps===60){return 6000000;}if(resolution==='900p'&&fps===60){return 6000000;}if(resolution==='720p'&&fps===60){return 4500000;}if(resolution==='720p'&&fps===30){return 3000000;}};var Stream=function(_React$Component){(0,_inherits2.default)(Stream,_React$Component);var _super=_createSuper(Stream);function Stream(){var _this;(0,_classCallCheck2.default)(this,Stream);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={publishBtnTitle:'Start Publish',isPublish:false};_this.onStatus=function(event){console.log('streaming event',event);};_this.switchCamera=function(){_this.vb.switchCamera();};return _this;}(0,_createClass2.default)(Stream,[{key:"render",value:function render(){var _this2=this;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_reactNativeStreamClient.NodeCameraView,{style:{flex:1},ref:function ref(vb){_this2.vb=vb;},outputUrl:LOCALHOST_RTMP,camera:{cameraId:1},audio:{bitrate:32000,profile:1,samplerate:44100},video:{preset:12,bitrate:mapBitrate('1080p',60),profile:1,fps:20,videoFrontMirror:false},autopreview:true,onStatus:this.onStatus,__self:this,__source:{fileName:_jsxFileName,lineNumber:46,columnNumber:9}}),_react.default.createElement(_reactNative.Button,{onPress:this.switchCamera,title:"Switch Camera",__self:this,__source:{fileName:_jsxFileName,lineNumber:65,columnNumber:9}}),_react.default.createElement(_reactNative.Button,{onPress:function onPress(){if(_this2.state.isPublish){_this2.setState({publishBtnTitle:'Start Publish',isPublish:false});_this2.vb.stop();}else{_this2.setState({publishBtnTitle:'Stop Publish',isPublish:true});_this2.vb.start();}},title:this.state.publishBtnTitle,color:"#841584",__self:this,__source:{fileName:_jsxFileName,lineNumber:67,columnNumber:9}}));}}]);return Stream;}(_react.default.Component);exports.default=Stream;