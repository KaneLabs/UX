var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var React=_interopRequireWildcard(require("react"));var _core=require("@react-navigation/core");var _client=require("@apollo/client");var _reactNative=require("react-native");var _queries=require("../../queries");var _Button=_interopRequireDefault(require("../../components/Button"));var _theme=require("../../theme");var _this=this,_jsxFileName="/Users/kane/Lab/Eros/src/containers/Buttons/LogoutButton.tsx";var LogoutButton=function LogoutButton(){var _data$Me;var navigation=(0,_core.useNavigation)();var _useQuery=(0,_client.useQuery)(_queries.ME),client=_useQuery.client,data=_useQuery.data,error=_useQuery.error,loading=_useQuery.loading;var isLoggedIn=data==null?void 0:(_data$Me=data.Me)==null?void 0:_data$Me.id;var styles=useStyles();var logout=function logout(){return _regenerator.default.async(function logout$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regenerator.default.awrap(_reactNative.AsyncStorage.removeItem('token'));case 2:client.writeQuery({query:_queries.ME,data:{Me:null}});client.resetStore();navigation.navigate('MainStack');case 5:case"end":return _context.stop();}}},null,null,null,Promise);};if(isLoggedIn){return React.createElement(_Button.default,{fontStyle:styles.button,onPress:logout,text:'LOGOUT',__self:_this,__source:{fileName:_jsxFileName,lineNumber:25,columnNumber:7}});}return null;};var useStyles=(0,_theme.makeStyles)(function(theme){return{button:{color:theme.textColor.secondary}};});var _default=LogoutButton;exports.default=_default;