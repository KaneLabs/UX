var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _react=_interopRequireDefault(require("react"));var _FlatList=_interopRequireDefault(require("react-native-web/dist/exports/FlatList"));var _RefreshControl=_interopRequireDefault(require("react-native-web/dist/exports/RefreshControl"));var _Image=_interopRequireDefault(require("react-native-web/dist/exports/Image"));var _Dimensions=_interopRequireDefault(require("react-native-web/dist/exports/Dimensions"));var _ScrollView=_interopRequireDefault(require("react-native-web/dist/exports/ScrollView"));var _View=_interopRequireDefault(require("react-native-web/dist/exports/View"));var _components=require("../../components");var _theme=require("../../theme");var _state=require("../../state");var _Search=_interopRequireDefault(require("../Search"));var _this=this,_jsxFileName="/Users/kane/Lab/Eros/src/containers/MasonryList/index.js";var Chip=function Chip(_ref){var text=_ref.text;var styles=useStyles();return _react.default.createElement(_View.default,{style:styles.chip,__self:_this,__source:{fileName:_jsxFileName,lineNumber:22,columnNumber:5}},_react.default.createElement(_components.Typography,{type:"caption",text:text,__self:_this,__source:{fileName:_jsxFileName,lineNumber:23,columnNumber:7}}));};var useStyles=(0,_theme.makeStyles)(function(theme){return{chip:{paddingHorizontal:theme.padding,borderColor:theme.borderColor,borderWidth:theme.borderWidth,borderRadius:theme.unit*4,height:theme.unit*4,minWidth:theme.unit*6,marginVertical:theme.padding,marginRight:theme.padding,justifyContent:'center'},headerScrollableRow:{marginLeft:theme.padding*2},container:{backgroundColor:theme.backgroundColorOpaque,backdropFilter:"blur("+theme.padding+"px)",width:'100%',marginBottom:theme.padding*2},headerTitle:{width:theme.unit*7},headerPrimaryRow:{width:'100%',paddingHorizontal:theme.padding*2,flexDirection:'row',alignItems:'center'},headerPrimaryLeft:{height:'100%',justifyContent:'center',width:theme.unit*7},headerPrimaryRight:{height:'100%',width:theme.unit*7}};});var ListHeaderComponent=function ListHeaderComponent(){var styles=useStyles();return _react.default.createElement(_View.default,{style:styles.container,__self:_this,__source:{fileName:_jsxFileName,lineNumber:75,columnNumber:5}},_react.default.createElement(_View.default,{style:styles.headerPrimaryRow,__self:_this,__source:{fileName:_jsxFileName,lineNumber:76,columnNumber:7}},_react.default.createElement(_components.Typography,{type:"h5",text:"Fora",style:styles.headerTitle,__self:_this,__source:{fileName:_jsxFileName,lineNumber:77,columnNumber:9}}),_react.default.createElement(_Search.default,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:78,columnNumber:9}}),_react.default.createElement(_View.default,{style:styles.headerPrimaryRight,__self:_this,__source:{fileName:_jsxFileName,lineNumber:79,columnNumber:9}})),_react.default.createElement(_ScrollView.default,{horizontal:true,contentContainerStyle:styles.headerScrollableRow,__self:_this,__source:{fileName:_jsxFileName,lineNumber:81,columnNumber:7}},_react.default.createElement(Chip,{text:"#Hot",__self:_this,__source:{fileName:_jsxFileName,lineNumber:82,columnNumber:9}}),_react.default.createElement(Chip,{text:"#Friends",__self:_this,__source:{fileName:_jsxFileName,lineNumber:83,columnNumber:9}}),_react.default.createElement(Chip,{text:"#HotFriends",__self:_this,__source:{fileName:_jsxFileName,lineNumber:84,columnNumber:9}}),_react.default.createElement(Chip,{text:"#Following",__self:_this,__source:{fileName:_jsxFileName,lineNumber:85,columnNumber:9}})));};var MasonryList=function MasonryList(_ref2){var posts=_ref2.posts,onPostPress=_ref2.onPostPress,onEndReached=_ref2.onEndReached,onRefresh=_ref2.onRefresh,refreshing=_ref2.refreshing,subscribeToNewPosts=_ref2.subscribeToNewPosts,_ref2$mobile=_ref2.mobile,mobile=_ref2$mobile===void 0?null:_ref2$mobile,rest=(0,_objectWithoutProperties2.default)(_ref2,["posts","onPostPress","onEndReached","onRefresh","refreshing","subscribeToNewPosts","mobile"]);console.log('POSTS',posts);var _useTheme=(0,_theme.useTheme)(),_useTheme2=(0,_slicedToArray2.default)(_useTheme,1),_useTheme2$=_useTheme2[0],appBackgroundColor=_useTheme2$.appBackgroundColor,textColor=_useTheme2$.textColor,borderRadius=_useTheme2$.borderRadius,borderColor=_useTheme2$.borderColor,padding=_useTheme2$.padding,unit=_useTheme2$.unit,TOOLBAR_WIDTH_OPEN=_useTheme2$.TOOLBAR_WIDTH_OPEN,TOOLBAR_WIDTH_CLOSED=_useTheme2$.TOOLBAR_WIDTH_CLOSED;var _useDrawer=(0,_state.useDrawer)(),leftOpen=_useDrawer.open,leftLock=_useDrawer.lock;var _useSocialDrawer=(0,_state.useSocialDrawer)(),rightOpen=_useSocialDrawer.open,rightLock=_useSocialDrawer.lock;var _Dimensions$get=_Dimensions.default.get('window'),width=_Dimensions$get.width;var toolbarLeftWidth=leftOpen&&leftLock?TOOLBAR_WIDTH_OPEN:TOOLBAR_WIDTH_CLOSED;var toolbarRightWidth=rightOpen&&rightLock?TOOLBAR_WIDTH_OPEN:TOOLBAR_WIDTH_CLOSED;var WIDTH=width-toolbarLeftWidth-toolbarRightWidth;var MARGIN=padding;var CONTAINER_WIDTH=WIDTH-MARGIN*2;var NUM_COLUMNS=3;var COLUMN_WIDTH=Math.floor(CONTAINER_WIDTH/NUM_COLUMNS);var IMAGE_WIDTH=Math.floor(COLUMN_WIDTH-MARGIN*2);var ASPECT_RATIO=16/9;var IMAGE_HEIGHT=Math.floor(IMAGE_WIDTH*ASPECT_RATIO);var FULL_IMAGE_WIDTH=Math.floor(CONTAINER_WIDTH-MARGIN*2);var FULL_IMAGE_HEIGHT=Math.floor(FULL_IMAGE_WIDTH/ASPECT_RATIO);var data=[{id:0,uri:"https://picsum.photos/"+FULL_IMAGE_WIDTH+"/"+FULL_IMAGE_HEIGHT,height:FULL_IMAGE_HEIGHT,width:FULL_IMAGE_WIDTH},{id:1,contents:[{id:2,uri:"https://picsum.photos/"+IMAGE_HEIGHT+"/"+IMAGE_WIDTH,height:IMAGE_HEIGHT,width:IMAGE_WIDTH},{id:3,uri:"https://picsum.photos/"+IMAGE_HEIGHT+"/"+IMAGE_WIDTH,height:IMAGE_HEIGHT,width:IMAGE_WIDTH},{id:4,uri:"https://picsum.photos/"+IMAGE_HEIGHT+"/"+IMAGE_WIDTH,height:IMAGE_HEIGHT,width:IMAGE_WIDTH}],height:Math.ceil(CONTAINER_WIDTH/ASPECT_RATIO)-MARGIN,width:CONTAINER_WIDTH},{id:9,uri:"https://picsum.photos/"+FULL_IMAGE_WIDTH+"/"+FULL_IMAGE_HEIGHT,height:FULL_IMAGE_HEIGHT,width:FULL_IMAGE_WIDTH},{id:2,contents:[{id:2,uri:"https://picsum.photos/"+IMAGE_HEIGHT+"/"+IMAGE_WIDTH,height:IMAGE_HEIGHT,width:IMAGE_WIDTH},{id:3,uri:"https://picsum.photos/"+IMAGE_HEIGHT+"/"+IMAGE_WIDTH,height:IMAGE_HEIGHT,width:IMAGE_WIDTH},{id:4,uri:"https://picsum.photos/"+IMAGE_HEIGHT+"/"+IMAGE_WIDTH,height:IMAGE_HEIGHT,width:IMAGE_WIDTH}],height:Math.ceil(CONTAINER_WIDTH/ASPECT_RATIO)-MARGIN,width:CONTAINER_WIDTH}];return _react.default.createElement(_FlatList.default,(0,_extends2.default)({testID:"MasonryList",data:data,ListHeaderComponent:ListHeaderComponent,stickyHeaderIndices:[0],renderItem:function renderItem(_ref3){var item=_ref3.item,key=_ref3.key;if(item!=null&&item.contents){return _react.default.createElement(_View.default,{style:{flexWrap:'wrap',width:item.width,height:item.height,marginLeft:MARGIN*2,marginBottom:MARGIN*2},__self:_this,__source:{fileName:_jsxFileName,lineNumber:189,columnNumber:13}},item.contents.map(function(content){return _react.default.createElement(_Image.default,{style:(0,_extends2.default)({},(0,_theme.shadow)(12),{borderColor:borderColor,borderWidth:1,borderRadius:borderRadius*3.5,height:content.height,width:content.width,marginRight:MARGIN*2}),source:{uri:content.uri},__self:_this,__source:{fileName:_jsxFileName,lineNumber:194,columnNumber:17}});}));}return _react.default.createElement(_Image.default,{style:(0,_extends2.default)({},(0,_theme.shadow)(12),{borderColor:borderColor,borderWidth:1,borderRadius:borderRadius*3.5,height:item.height,width:item.width,marginBottom:MARGIN*2,marginHorizontal:MARGIN*2}),source:{uri:item.uri},__self:_this,__source:{fileName:_jsxFileName,lineNumber:206,columnNumber:11}});},refreshControl:_react.default.createElement(_RefreshControl.default,{refreshing:refreshing,onRefresh:onRefresh,tintColor:textColor.secondary,__self:_this,__source:{fileName:_jsxFileName,lineNumber:215,columnNumber:9}}),columnWrapperStyle:{flexWrap:'wrap'},numColumns:NUM_COLUMNS,onEndReached:onEndReached,onEndReachedThreshold:0.5,keyExtractor:function keyExtractor(_ref4){var id=_ref4.id;return id;},contentContainerStyle:{paddingLeft:toolbarLeftWidth,paddingRight:toolbarRightWidth,height:'100%'},style:{flex:1,height:'100%',width:'100%',backgroundColor:appBackgroundColor}},rest,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:181,columnNumber:5}}));};var _default=MasonryList;exports.default=_default;